var t=Object.defineProperty,e=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,s=(e,o,a)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,n=(t,n)=>{for(var l in n||(n={}))e.call(n,l)&&s(t,l,n[l]);if(o)for(var l of o(n))a.call(n,l)&&s(t,l,n[l]);return t};import{Q as l,S as r,i as c,s as d,e as i,k as u,c as f,a as h,n as p,d as m,b as v,F as g,f as j,G as y,R as b,T as w,U as E,V as O,W as x,O as T,t as z,P as M,g as $,X as k,u as P,v as U,r as F,Y as I,B as N,Z as R,C as _}from"../../chunks/index-5ad3f4d4.js";function B(t){const e=t-1;return e*e*e+1}function D(t,{pending:e,error:o,result:a}){let s;async function n(n){const l=s={};n.preventDefault();const r=new FormData(t);e&&e(r,t);try{const e=await fetch(t.action,{method:t.method,headers:{accept:"application/json"},body:r});if(l!==s)return;e.ok?a(e,t):o?o(e,null,t):console.error(await e.text())}catch(c){if(!o)throw c;o(null,c,t)}}return t.addEventListener("submit",n),{destroy(){t.removeEventListener("submit",n)}}}function S(t,{delay:e=0,duration:o=400,easing:a=B,start:s=0,opacity:n=0}={}){const l=getComputedStyle(t),r=+l.opacity,c="none"===l.transform?"":l.transform,d=1-s,i=r*(1-n);return{delay:e,duration:o,easing:a,css:(t,e)=>`\n\t\t\ttransform: ${c} scale(${1-d*e});\n\t\t\topacity: ${r-i*e}\n\t\t`}}function C(t,e,o={}){const a=getComputedStyle(t),s="none"===a.transform?"":a.transform,n=e.from.width/t.clientWidth,r=e.from.height/t.clientHeight,c=(e.from.left-e.to.left)/n,d=(e.from.top-e.to.top)/r,i=Math.sqrt(c*c+d*d),{delay:u=0,duration:f=(t=>120*Math.sqrt(t)),easing:h=B}=o;return{delay:u,duration:l(f)?f(i):f,easing:h,css:(t,e)=>`transform: ${s} translate(${e*c}px, ${e*d}px);`}}function V(t,e,o){const a=t.slice();return a[5]=e[o],a}function q(t,e){let o,a,s,n,r,c,d,z,M,$,k,P,U,F,N,R,B,V,q,H,L,W,G,Q,X,Y,Z,A=_;function J(...t){return e[3](e[5],...t)}function K(){return e[4](e[5])}return{key:t,first:null,c(){o=i("div"),a=i("form"),s=i("input"),r=u(),c=i("button"),$=u(),k=i("form"),P=i("input"),F=u(),N=i("button"),B=u(),V=i("form"),q=i("button"),W=u(),this.h()},l(t){o=f(t,"DIV",{class:!0});var e=h(o);a=f(e,"FORM",{action:!0,method:!0});var n=h(a);s=f(n,"INPUT",{type:!0,name:!0,value:!0,class:!0}),r=p(n),c=f(n,"BUTTON",{class:!0,"aria-label":!0}),h(c).forEach(m),n.forEach(m),$=p(e),k=f(e,"FORM",{class:!0,action:!0,method:!0});var l=h(k);P=f(l,"INPUT",{type:!0,name:!0,value:!0,class:!0}),F=p(l),N=f(l,"BUTTON",{class:!0,"aria-label":!0}),h(N).forEach(m),l.forEach(m),B=p(e),V=f(e,"FORM",{action:!0,method:!0});var d=h(V);q=f(d,"BUTTON",{class:!0,"aria-label":!0}),h(q).forEach(m),d.forEach(m),W=p(e),e.forEach(m),this.h()},h(){v(s,"type","hidden"),v(s,"name","done"),s.value=n=e[5].done?"":"true",v(s,"class","svelte-ztcljr"),v(c,"class","toggle svelte-ztcljr"),v(c,"aria-label",d="Mark todo as "+(e[5].done?"not done":"done")),v(a,"action",z="/todos/"+e[5].uid+".json?_method=patch"),v(a,"method","post"),v(P,"type","text"),v(P,"name","text"),P.value=U=e[5].text,v(P,"class","svelte-ztcljr"),v(N,"class","save svelte-ztcljr"),v(N,"aria-label","Save todo"),v(k,"class","text svelte-ztcljr"),v(k,"action",R="/todos/"+e[5].uid+".json?_method=patch"),v(k,"method","post"),v(q,"class","delete svelte-ztcljr"),v(q,"aria-label","Delete todo"),v(V,"action",H="/todos/"+e[5].uid+".json?_method=delete"),v(V,"method","post"),v(o,"class","todo svelte-ztcljr"),g(o,"done",e[5].done),this.first=o},m(t,n){j(t,o,n),y(o,a),y(a,s),y(a,r),y(a,c),y(o,$),y(o,k),y(k,P),y(k,F),y(k,N),y(o,B),y(o,V),y(V,q),y(o,W),X=!0,Y||(Z=[b(M=D.call(null,a,{pending:J,result:e[1]})),b(D.call(null,k,{result:e[1]})),b(L=D.call(null,V,{result:K}))],Y=!0)},p(t,r){e=t,(!X||1&r&&n!==(n=e[5].done?"":"true"))&&(s.value=n),(!X||1&r&&d!==(d="Mark todo as "+(e[5].done?"not done":"done")))&&v(c,"aria-label",d),(!X||1&r&&z!==(z="/todos/"+e[5].uid+".json?_method=patch"))&&v(a,"action",z),M&&l(M.update)&&1&r&&M.update.call(null,{pending:J,result:e[1]}),(!X||1&r&&U!==(U=e[5].text)&&P.value!==U)&&(P.value=U),(!X||1&r&&R!==(R="/todos/"+e[5].uid+".json?_method=patch"))&&v(k,"action",R),(!X||1&r&&H!==(H="/todos/"+e[5].uid+".json?_method=delete"))&&v(V,"action",H),L&&l(L.update)&&1&r&&L.update.call(null,{result:K}),1&r&&g(o,"done",e[5].done)},r(){Q=o.getBoundingClientRect()},f(){w(o),A(),E(o,Q)},a(){A(),A=O(o,Q,C,{duration:200})},i(t){X||(t&&I((()=>{G||(G=x(o,S,{start:.7},!0)),G.run(1)})),X=!0)},o(t){t&&(G||(G=x(o,S,{start:.7},!1)),G.run(0)),X=!1},d(t){t&&m(o),t&&G&&G.end(),Y=!1,T(Z)}}}function H(t){let e,o,a,s,n,r,c,d,g,w,E,O,x=[],T=new Map,I=t[0];const _=t=>t[5].uid;for(let l=0;l<I.length;l+=1){let e=V(t,I,l),o=_(e);T.set(o,x[l]=q(o,e))}return{c(){e=u(),o=i("div"),a=i("h1"),s=z("Todos"),n=u(),r=i("form"),c=i("input"),g=u();for(let t=0;t<x.length;t+=1)x[t].c();this.h()},l(t){M('[data-svelte="svelte-181o7gf"]',document.head).forEach(m),e=p(t),o=f(t,"DIV",{class:!0});var l=h(o);a=f(l,"H1",{});var d=h(a);s=$(d,"Todos"),d.forEach(m),n=p(l),r=f(l,"FORM",{class:!0,action:!0,method:!0});var i=h(r);c=f(i,"INPUT",{name:!0,placeholder:!0,class:!0}),i.forEach(m),g=p(l);for(let e=0;e<x.length;e+=1)x[e].l(l);l.forEach(m),this.h()},h(){document.title="Todos",v(c,"name","text"),v(c,"placeholder","+ tap to add a todo"),v(c,"class","svelte-ztcljr"),v(r,"class","new svelte-ztcljr"),v(r,"action","/todos.json"),v(r,"method","post"),v(o,"class","todos svelte-ztcljr")},m(l,i){j(l,e,i),j(l,o,i),y(o,a),y(a,s),y(o,n),y(o,r),y(r,c),y(o,g);for(let t=0;t<x.length;t+=1)x[t].m(o,null);w=!0,E||(O=b(d=D.call(null,r,{result:t[2]})),E=!0)},p(t,[e]){if(d&&l(d.update)&&1&e&&d.update.call(null,{result:t[2]}),3&e){I=t[0],N();for(let t=0;t<x.length;t+=1)x[t].r();x=k(x,e,_,1,t,I,T,o,R,q,null,V);for(let t=0;t<x.length;t+=1)x[t].a();P()}},i(t){if(!w){for(let t=0;t<I.length;t+=1)U(x[t]);w=!0}},o(t){for(let e=0;e<x.length;e+=1)F(x[e]);w=!1},d(t){t&&m(e),t&&m(o);for(let e=0;e<x.length;e+=1)x[e].d();E=!1,O()}}}const L=async({fetch:t})=>{const e=await t("/todos.json");if(e.ok){return{props:{todos:await e.json()}}}const{message:o}=await e.json();return{error:new Error(o)}};function W(t,e,o){let{todos:a}=e;return t.$$set=t=>{"todos"in t&&o(0,a=t.todos)},[a,async function(t){const e=await t.json();o(0,a=a.map((t=>t.uid===e.uid?e:t)))},async(t,e)=>{const s=await t.json();o(0,a=[...a,s]),e.reset()},(t,e)=>{const s=!!e.get("done");o(0,a=a.map((e=>e===t?n(n({},e),{done:s}):e)))},t=>{o(0,a=a.filter((e=>e.uid!==t.uid)))}]}export default class extends r{constructor(t){super(),c(this,t,W,H,d,{todos:0})}}export{L as load};
